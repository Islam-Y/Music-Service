spring:
  datasource:
    url: ${DB_URL:jdbc:postgresql://postgres:5432/music_db}
    username: ${DB_USER:music}
    password: ${DB_PASSWORD:music}
  data:
    redis:
      host: ${REDIS_HOST:redis}
      port: ${REDIS_PORT:6379}
  kafka:
    bootstrap-servers: ${KAFKA_BOOTSTRAP:localhost:9092}
    producer:
      transactional-id-prefix: music-service-tx-
    consumer:
      group-id: music-service

app:
  s3:
    bucket: ${S3_BUCKET:music-bucket}
    region: ${S3_REGION:us-east-1}
    endpoint: ${S3_ENDPOINT:http://minio:9000}
    access-key: ${S3_ACCESS_KEY:minioadmin}
    secret-key: ${S3_SECRET_KEY:minioadmin}
    presign-ttl-seconds: 600
  stream-url:
    ttl-seconds: 600
  cache:
    track-ttl-seconds: 600
    stream-url-ttl-seconds: 300
    facts-ttl-seconds: 1800
  kafka:
    topics:
      track-created: music.track.created
      track-updated: music.track.updated
      track-deleted: music.track.deleted
      track-domain: music.track.domain
      track-domain-dlq: music.track.domain.dlq
      facts-refresh: music.track.facts.refresh
      facts-generated: music.track.facts.generated
      facts-events-outbox: music.facts.events
  outbox:
    poll-interval-ms: 2000
    max-attempts: 5
    dlq-topic: music.outbox.dlq
  idempotency:
    track-ttl-seconds: 86400
